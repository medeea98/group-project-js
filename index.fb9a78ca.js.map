{"mappings":"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","sources":["src/js/searchbar.js"],"sourcesContent":["// searchbar.js\nimport { apiKey, apiUrlBase } from './api-key.js';\n\nasync function fetchData(url, options) {\n  try {\n    const response = await fetch(url, options);\n    if (!response.ok) {\n      throw new Error('Network response was not ok');\n    }\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.error('Error fetching data:', error);\n    return null;\n  }\n}\n\nasync function getMovies(endpoint) {\n  const apiUrl = `${apiUrlBase}/${endpoint}?api_key=${apiKey}`;\n\n  try {\n    const response = await fetch(apiUrl);\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.error(`Error at ${apiUrl}`, error);\n  }\n}\n\nasync function getGenres() {\n  return getMovies('/genre/movie/list');\n}\n\nasync function getPopularMovies() {\n  return getMovies('/trending/movie/week');\n}\n  \nasync function searchMovies(title) {\n  const apiUrl = `${apiUrlBase}/search/movie?api_key=${apiKey}&query=${title}&language=en-US&include_adult=false&page=1`;\n\n  const options = {\n    method: 'GET',\n    headers: {\n      accept: 'application/json',\n    }\n  };\n\n  return await fetchData(apiUrl, options);\n}\n\nfunction roundRating(rating) {\n  const roundedRating =\n    Math.abs(rating % 1) >= 0.005\n      ? Math.ceil(rating * 100) / 100\n      : Math.floor(rating * 100) / 100;\n  return roundedRating;\n}\n  \nasync function searchAndDisplayMovies(title) {\n  let movies;\n  if (title) {\n    movies = await searchMovies(title);\n  } else {\n    movies = await getPopularMovies();\n  }\n\n  const moviesContainer = document.getElementById('movie-container');\n  moviesContainer.innerHTML = '';\n\n  if (movies.results.length === 0) {\n    const errorMessage = document.createElement('p');\n    errorMessage.textContent = 'Nu s-au găsit filme pentru căutarea dată.';\n    moviesContainer.appendChild(errorMessage);\n    document.querySelector('.movies').hidden = true;\n  } else {\n    document.querySelector('.movies').remove();\n    const moviesContainer = document.createElement('div');\n    moviesContainer.classList.add('movies');\n  \n    const movieContainer = document.createElement('div');\n    movieContainer.id = 'movie-container';\n  \n    moviesContainer.appendChild(movieContainer);\n  \n    document.body.appendChild(moviesContainer);\n\n    const genres = await getGenres();\n    \n    movies.results.forEach(movie => {\n      createMovieCard(movie, genres, movieContainer);\n    });\n  }\n}\n\nfunction createMovieCard(movie, genres, movieContainer) {\n  const movieCard = document.createElement('div');\n  movieCard.classList.add('movie-card');\n\n  const movieImage = document.createElement('img');\n  movieImage.src = `https://image.tmdb.org/t/p/w500/${movie.poster_path}`;\n  movieImage.alt = `${movie.title} Poster`;\n  movieImage.classList.add('movie-image');\n\n  const movieDescription = document.createElement('div');\n  movieDescription.classList.add('movie-description');\n\n  const movieTitle = document.createElement('h2');\n  movieTitle.textContent = movie.title;\n  movieTitle.classList.add('movie-title');\n\n  const movieGenres = movie.genre_ids.map(genreId => {\n    const genre = genres.genres.find(g => g.id === genreId);\n    return genre ? genre.name : '';\n  });\n\n  const displayedGenres = movieGenres.slice(0, 2);\n  const otherGenres = movieGenres.slice(2);\n\n  const roundedRating = roundRating(movie.vote_average);\n\n  const movieGenreYearRating = document.createElement('p');\n\n  const ratingSpan = document.createElement('span');\n  ratingSpan.classList.add('rating');\n  ratingSpan.textContent = ` ${roundedRating}`;\n\n  if (otherGenres.length > 0) {\n    movieGenreYearRating.innerHTML = `${displayedGenres.join(\n      ', '\n    )}, Other | ${\n      movie.release_date ? movie.release_date.substring(0, 4) : 'N/A'\n    } | `;\n  } else {\n    movieGenreYearRating.innerHTML = `${displayedGenres.join(', ')} | ${\n      movie.release_date ? movie.release_date.substring(0, 4) : 'N/A'\n    } | `;\n  }\n\n  movieGenreYearRating.appendChild(ratingSpan);\n\n  movieGenreYearRating.classList.add('movie-details');\n\n  movieDescription.appendChild(movieTitle);\n  movieDescription.appendChild(movieGenreYearRating);\n\n  movieCard.appendChild(movieImage);\n  movieCard.appendChild(movieDescription);\n\n  movieContainer.appendChild(movieCard);\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const searchInput = document.querySelector('.search-input');\n  const searchForm = document.querySelector('.search-bar');\n\n  searchForm.addEventListener('submit', async event => {\n    event.preventDefault();\n    const searchQuery = searchInput.value.trim();\n    await searchAndDisplayMovies(searchQuery);\n  });\n})\n"],"names":["async","$59082835cf4f582e$var$getMovies","endpoint","apiUrl","response","fetch","json","error","console","$59082835cf4f582e$var$searchMovies","title","url","options","ok","Error","$59082835cf4f582e$var$fetchData","method","headers","accept","$59082835cf4f582e$var$searchAndDisplayMovies","movies","$59082835cf4f582e$var$getPopularMovies","moviesContainer","document","getElementById","innerHTML","results","length","errorMessage","createElement","textContent","appendChild","querySelector","hidden","remove","classList","add","movieContainer","id","body","genres","$59082835cf4f582e$var$getGenres","forEach","movie","movieCard","movieImage","src","poster_path","alt","movieDescription","movieTitle","movieGenres","genre_ids","map","genreId","genre","find","g","name","displayedGenres","slice","otherGenres","roundedRating","rating","vote_average","Math","abs","ceil","floor","movieGenreYearRating","ratingSpan","join","release_date","substring","$59082835cf4f582e$var$createMovieCard","addEventListener","searchInput","event","preventDefault","searchQuery","value","trim"],"version":3,"file":"index.fb9a78ca.js.map"}