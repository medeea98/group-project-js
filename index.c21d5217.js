async function e(e){const t=`https://api.themoviedb.org/3/${e}?api_key=004a3a7ad0ebfa9ee53f6d0ac407af43`;try{const e=await fetch(t);return await e.json()}catch(e){console.error(`Error at ${t}`,e)}}function t(e){return Math.abs(e%1)>=.005?Math.ceil(100*e)/100:Math.floor(100*e)/100}function n(e,t,n,o,c,i){const s=document.createElement("div");s.classList.add("modal-backdrop"),s.addEventListener("click",(e=>{e.target===s&&a(s)}));const r=document.createElement("div");r.classList.add("modal-content");const l=document.createElement("img");l.src=`https://image.tmdb.org/t/p/w500/${t}`,l.alt=`${e} Poster`,l.classList.add("movie-image");const m=document.createElement("h2");m.textContent=e;const p=document.createElement("button");p.classList.add("close-button"),p.addEventListener("click",(()=>a(s)));const u=document.createElement("div");u.classList.add("modal-movie-description");const h=document.createElement("p");h.innerHTML="<b>ABOUT:</b>";const v=document.createElement("p");v.textContent=i;const E=document.createElement("div");E.classList.add("movie-modal-stats");const C=document.createElement("div");C.classList.add("movie-modal-tags");const g=document.createElement("div");g.classList.add("movie-modal-results");const f=document.createElement("span");f.textContent="Rating:";const y=document.createElement("span");y.classList.add("rating"),y.textContent=n;const L=document.createElement("span");L.textContent="Popularity:";const w=document.createElement("span");w.textContent=o;const b=document.createElement("span");b.textContent="Genres:";const $=document.createElement("span");$.textContent=c.join(", "),C.appendChild(f),C.appendChild(L),C.appendChild(b),g.appendChild(y),g.appendChild(w),g.appendChild($),E.appendChild(C),E.appendChild(g),u.appendChild(m),u.appendChild(E),u.appendChild(h),u.appendChild(v);const _=document.createElement("div");_.classList.add("modal-buttons");const x=d("ADD TO WATCHED","movie-watched-btn"),k=d("ADD TO QUEUE","movie-queue-btn");_.appendChild(x),_.appendChild(k),u.appendChild(_),r.appendChild(l),r.appendChild(u),r.appendChild(p),s.appendChild(r),document.body.appendChild(s),s.style.display="flex",document.body.style.overflow="hidden"}function a(e){e.style.display="none",document.body.style.overflow="",e.remove()}function d(e,t){const n=document.createElement("button");return n.textContent=e,n.classList.add(t),n}async function o(e){const t=`https://api.themoviedb.org/3/${e}?api_key=004a3a7ad0ebfa9ee53f6d0ac407af43`;try{const e=await fetch(t);return await e.json()}catch(e){console.error(`Error at ${t}`,e)}}async function c(e){const t=`https://api.themoviedb.org/3/search/movie?api_key=004a3a7ad0ebfa9ee53f6d0ac407af43&query=${e}&language=en-US&include_adult=false&page=1`;return await async function(e,t){try{const n=await fetch(e,t);if(!n.ok)throw new Error("Network response was not ok");return await n.json()}catch(e){return console.error("Error fetching data:",e),null}}(t,{method:"GET",headers:{accept:"application/json"}})}async function i(e){let t;t=e?await c(e):await async function(){return o("/trending/movie/week")}();const a=document.getElementById("movie-container");if(a.innerHTML="",0===t.results.length){const e=document.createElement("p");e.textContent="Nu s-au găsit filme pentru căutarea dată.",a.appendChild(e),document.querySelector(".movies").hidden=!0}else{document.querySelector(".movies").remove();const e=document.createElement("div");e.classList.add("movies");const a=document.createElement("div");a.id="movie-container",e.appendChild(a),document.body.appendChild(e);const d=await async function(){return o("/genre/movie/list")}();t.results.forEach((e=>{!function(e,t,a){const d=document.createElement("div");d.classList.add("movie-card");const o=document.createElement("img");o.src=`https://image.tmdb.org/t/p/w500/${e.poster_path}`,o.alt=`${e.title} Poster`,o.classList.add("movie-image");const c=document.createElement("div");c.classList.add("movie-description");const i=document.createElement("h2");i.textContent=e.title,i.classList.add("movie-title");const s=e.genre_ids.map((e=>{const n=t.genres.find((t=>t.id===e));return n?n.name:""})),r=s.slice(0,2),l=s.slice(2),m=(h=e.vote_average,Math.abs(h%1)>=.005?Math.ceil(100*h)/100:Math.floor(100*h)/100),p=document.createElement("p"),u=document.createElement("span");var h;u.classList.add("rating"),u.textContent=` ${m}`,l.length>0?p.innerHTML=`${r.join(", ")}, Other | ${e.release_date?e.release_date.substring(0,4):"N/A"} | `:p.innerHTML=`${r.join(", ")} | ${e.release_date?e.release_date.substring(0,4):"N/A"} | `;p.appendChild(u),p.classList.add("movie-details"),c.appendChild(i),c.appendChild(p),d.appendChild(o),d.appendChild(c),a.appendChild(d),d.addEventListener("click",(()=>{n(e.title,e.poster_path,e.vote_average,e.popularity,r,e.overview)}))}(e,d,a)}))}}window.onload=async function(){const a=document.getElementById("main-content"),d=document.createElement("div");d.classList.add("movies");const o=document.createElement("div");o.id="movie-container",d.appendChild(o),a.appendChild(d);const c=await async function(){return e("trending/movie/week")}();await async function(){return e("genre/movie/list")}(),c.results.forEach((async a=>{const d=await e(`movie/${a.id}`),c=d.vote_average,i=d.popularity,s=d.genres.map((e=>e.name)),r=d.overview,l=document.createElement("div");l.classList.add("movie-card");const m=document.createElement("img");m.src=`https://image.tmdb.org/t/p/w500/${a.poster_path}`,m.alt=`${a.title} Poster`,m.classList.add("movie-image");const p=document.createElement("div");p.classList.add("movie-description");const u=document.createElement("h2");u.textContent=a.title,u.classList.add("movie-title");const h=document.createElement("span");h.classList.add("rating"),h.textContent=` ${t(c)}`;const v=document.createElement("p");v.innerHTML=`${s.slice(0,2).join(", ")}, ${s.length>2?"Other":""} | ${a.release_date?a.release_date.substring(0,4):"N/A"} | `,v.appendChild(h),v.classList.add("movie-details"),p.appendChild(u),p.appendChild(v),l.appendChild(m),l.appendChild(p),l.addEventListener("click",(()=>n(a.title,a.poster_path,t(c),i,s,r))),o.appendChild(l)}))},document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".search-input");document.querySelector(".search-bar").addEventListener("submit",(async t=>{t.preventDefault();const n=e.value.trim();await i(n)}))}));
//# sourceMappingURL=index.c21d5217.js.map
